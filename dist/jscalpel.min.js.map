{"version":3,"file":"jscalpel.min.js","sources":["../index.js"],"sourcesContent":["const jscalpel = ({ target, keys, prefix, callback, deep, dynamicKeys, plugins}, defaultOpts) => {\r\n    const nativeToString = Object.prototype.toString;\r\n    let enablePrefix = prefix ? true : false;\r\n    const deepCopy = (obj) => {\r\n        const returnObj = {};\r\n        let tempArr = [];\r\n        if (nativeToString.call(obj) === ['object Object']) {\r\n            Object.keys(obj).forEach((key, index) => {\r\n                if (Array.isArray(obj[key])) {\r\n                    obj[key].forEach((value, index) => {\r\n                        tempArr.push(value);\r\n                    });\r\n                    returnObj[key] = tempArr;\r\n                    tempArr = [];\r\n                } else if (nativeToString.call(obj[key] === '[object Object]')) {\r\n                    returnObj[key] = deepCopy(obj[key]);\r\n                }\r\n            });\r\n            return returnObj;\r\n        } else {\r\n            return obj;\r\n        }\r\n    }\r\n    const autoCompleteKey = (key) => {\r\n        return (`${prefix && enablePrefix ? `${prefix}.${key}` : `${key}`}`);\r\n    } \r\n    let defaultValue = null;\r\n    let result = null;\r\n    let epTarget = null;\r\n    if (typeof dynamicKeys === 'function') {\r\n        keys = dynamicKeys(keys) || keys;\r\n        enablePrefix = false;\r\n    }\r\n    try {\r\n        epTarget = typeof target === 'string' ? JSON.parse(target) : target;\r\n        if (deep) {\r\n            alert('isDeepCopy');\r\n            epTarget = deepCopy(epTarget);\r\n        }\r\n        if (!nativeToString.call(epTarget) === '[object Object]') {\r\n            console.error('传入的target不是有效的json或者object');\r\n            return;\r\n        }\r\n    } catch (err) {\r\n        console.error('传入的target不是有效的json或者object');\r\n        return;\r\n    }\r\n    if (typeof keys === 'string' && keys.length > 0) {\r\n\r\n        `${autoCompleteKey(keys)}`.split('.').forEach((value, index) => {\r\n            result= (result ? result[value] : epTarget[value])\r\n            if (plugins && Array.isArray(plugins)) {\r\n                plugins.forEach((plugin, index) => {\r\n                    result = plugin(result);\r\n                })\r\n            }\r\n        })\r\n        if (callback && typeof callback === 'function') {;\r\n            defaultValue = callback.call(null, result, epTarget, keys, defaultOpts);\r\n        } else {\r\n            defaultValue = callback;\r\n        }\r\n        if (typeof defaultValue === 'undefined') {\r\n            return result || defaultOpts;\r\n        }\r\n        return defaultValue;\r\n    } else if (nativeToString.call(keys) === '[object Array]') {\r\n        const pResult = [];\r\n        keys.forEach((singlePath, index) => {\r\n            result = null;\r\n            if (typeof singlePath === 'string') {\r\n                `${autoCompleteKey(singlePath)}`.split('.').forEach((value, index) => {\r\n                    result= (result ? result[value] : epTarget[value])\r\n                    if (plugins && Array.isArray(plugins)) {\r\n                        plugins.forEach((plugin, index) => {\r\n                            result = plugin(result);\r\n                        })\r\n                    }\r\n                })\r\n                pResult.push(result);\r\n            }\r\n        })\r\n        pResult.push(epTarget,keys, defaultOpts);\r\n        if (callback && typeof callback === 'function') {\r\n            defaultValue = callback.apply(null, pResult);\r\n        } else {\r\n            defaultValue = callback;\r\n        }\r\n        if (typeof defaultValue === 'undefined') {\r\n            return pResult || defaultOpts;\r\n        }\r\n        return defaultValue;\r\n    }\r\n}\r\n\r\nexport default jscalpel;"],"names":["jscalpel","defaultOpts","target","keys","prefix","callback","deep","dynamicKeys","plugins","nativeToString","Object","prototype","toString","enablePrefix","deepCopy","obj","returnObj","tempArr","call","forEach","key","index","Array","isArray","value","push","autoCompleteKey","defaultValue","result","epTarget","JSON","parse","error","err","length","split","plugin","pResult","singlePath","apply"],"mappings":"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"}