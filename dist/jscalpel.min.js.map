{"version":3,"file":"jscalpel.min.js","sources":["../index.js"],"sourcesContent":["const jscalpel = ({ target, keys, prefix, callback, deep, dynamicKeys, plugins}, defaultOpts) => {\r\n    const nativeToString = Object.prototype.toString;\r\n    const deepCopy = (obj) => {\r\n        const returnObj = {};\r\n        let tempArr = [];\r\n        if (nativeToString.call(obj) === ['object Object']) {\r\n            Object.keys(obj).forEach((key, index) => {\r\n                if (Array.isArray(obj[key])) {\r\n                    obj[key].forEach((value, index) => {\r\n                        tempArr.push(value);\r\n                    });\r\n                    returnObj[key] = tempArr;\r\n                    tempArr = [];\r\n                } else if (nativeToString.call(obj[key] === '[object Object]')) {\r\n                    returnObj[key] = deepCopy(obj[key]);\r\n                }\r\n            });\r\n            return returnObj;\r\n        } else {\r\n            return obj;\r\n        }\r\n    }\r\n    const autoCompleteKey = (key) => (`${prefix ? `${prefix}.${key}` : `${key}`}`);\r\n    let defaultValue = null;\r\n    let result = null;\r\n    let epTarget = null;\r\n    if (typeof dynamicKeys === 'function') {\r\n        keys = dynamicKeys(keys) || keys;\r\n    }\r\n    try {\r\n        epTarget = typeof target === 'string' ? JSON.parse(target) : target;\r\n        if (deep) {\r\n            alert('isDeepCopy');\r\n            epTarget = deepCopy(epTarget);\r\n        }\r\n        if (!nativeToString.call(epTarget) === '[object Object]') {\r\n            console.error('传入的target不是有效的json或者object');\r\n            return;\r\n        }\r\n    } catch (err) {\r\n        console.error('传入的target不是有效的json或者object');\r\n        return;\r\n    }\r\n    if (typeof keys === 'string' && keys.length > 0) {\r\n\r\n        `${autoCompleteKey(keys)}`.split('.').forEach((value, index) => {\r\n            result= (result ? result[value] : epTarget[value])\r\n            if (plugins && Array.isArray(plugins)) {\r\n                plugins.forEach((plugin, index) => {\r\n                    result = plugin(result);\r\n                })\r\n            }\r\n        })\r\n        if (callback && typeof callback === 'function') {;\r\n            defaultValue = callback.call(null, result, epTarget, keys, defaultOpts);\r\n        } else {\r\n            defaultValue = callback;\r\n        }\r\n        if (typeof defaultValue === 'undefined') {\r\n            return result || defaultOpts;\r\n        }\r\n        return defaultValue;\r\n    } else if (nativeToString.call(keys) === '[object Array]') {\r\n        const pResult = [];\r\n        keys.forEach((singlePath, index) => {\r\n            result = null;\r\n            if (typeof singlePath === 'string') {\r\n                `${autoCompleteKey(singlePath)}`.split('.').forEach((value, index) => {\r\n                    result= (result ? result[value] : epTarget[value])\r\n                    if (plugins && Array.isArray(plugins)) {\r\n                        plugins.forEach((plugin, index) => {\r\n                            result = plugin(result);\r\n                        })\r\n                    }\r\n                })\r\n                pResult.push(result);\r\n            }\r\n        })\r\n        pResult.push(epTarget,keys, defaultOpts);\r\n        if (callback && typeof callback === 'function') {\r\n            defaultValue = callback.apply(null, pResult);\r\n        } else {\r\n            defaultValue = callback;\r\n        }\r\n        if (typeof defaultValue === 'undefined') {\r\n            return pResult || defaultOpts;\r\n        }\r\n        return defaultValue;\r\n    }\r\n}\r\n\r\nexport default jscalpel;"],"names":["jscalpel","defaultOpts","target","keys","prefix","callback","deep","dynamicKeys","plugins","nativeToString","Object","prototype","toString","deepCopy","obj","returnObj","tempArr","call","forEach","key","index","Array","isArray","value","push","autoCompleteKey","defaultValue","result","epTarget","JSON","parse","error","err","length","split","plugin","pResult","singlePath","apply"],"mappings":";;;;;;AAAA,IAAMA,WAAW,SAAXA,QAAW,OAAgEC,WAAhE,EAAgF;QAA7EC,MAA6E,QAA7EA,MAA6E;QAArEC,IAAqE,QAArEA,IAAqE;QAA/DC,MAA+D,QAA/DA,MAA+D;QAAvDC,QAAuD,QAAvDA,QAAuD;QAA7CC,IAA6C,QAA7CA,IAA6C;QAAvCC,WAAuC,QAAvCA,WAAuC;QAA1BC,OAA0B,QAA1BA,OAA0B;;QACvFC,iBAAiBC,OAAOC,SAAP,CAAiBC,QAAxC;QACMC,WAAW,SAAXA,QAAW,CAACC,GAAD,EAAS;YAChBC,YAAY,EAAlB;YACIC,UAAU,EAAd;YACIP,eAAeQ,IAAf,CAAoBH,GAApB,MAA6B,CAAC,eAAD,CAAjC,EAAoD;mBACzCX,IAAP,CAAYW,GAAZ,EAAiBI,OAAjB,CAAyB,UAACC,GAAD,EAAMC,KAAN,EAAgB;oBACjCC,MAAMC,OAAN,CAAcR,IAAIK,GAAJ,CAAd,CAAJ,EAA6B;wBACrBA,GAAJ,EAASD,OAAT,CAAiB,UAACK,KAAD,EAAQH,KAAR,EAAkB;gCACvBI,IAAR,CAAaD,KAAb;qBADJ;8BAGUJ,GAAV,IAAiBH,OAAjB;8BACU,EAAV;iBALJ,MAMO,IAAIP,eAAeQ,IAAf,CAAoBH,IAAIK,GAAJ,MAAa,iBAAjC,CAAJ,EAAyD;8BAClDA,GAAV,IAAiBN,SAASC,IAAIK,GAAJ,CAAT,CAAjB;;aARR;mBAWOJ,SAAP;SAZJ,MAaO;mBACID,GAAP;;KAjBR;QAoBMW,kBAAkB,SAAlBA,eAAkB,CAACN,GAAD;qBAAaf,SAAYA,MAAZ,SAAsBe,GAAtB,QAAiCA,GAA9C;KAAxB;QACIO,eAAe,IAAnB;QACIC,SAAS,IAAb;QACIC,WAAW,IAAf;QACI,OAAOrB,WAAP,KAAuB,UAA3B,EAAuC;eAC5BA,YAAYJ,IAAZ,KAAqBA,IAA5B;;QAEA;mBACW,OAAOD,MAAP,KAAkB,QAAlB,GAA6B2B,KAAKC,KAAL,CAAW5B,MAAX,CAA7B,GAAkDA,MAA7D;YACII,IAAJ,EAAU;kBACA,YAAN;uBACWO,SAASe,QAAT,CAAX;;YAEA,CAACnB,eAAeQ,IAAf,CAAoBW,QAApB,CAAD,KAAmC,iBAAvC,EAA0D;oBAC9CG,KAAR,CAAc,4BAAd;;;KAPR,CAUE,OAAOC,GAAP,EAAY;gBACFD,KAAR,CAAc,4BAAd;;;QAGA,OAAO5B,IAAP,KAAgB,QAAhB,IAA4BA,KAAK8B,MAAL,GAAc,CAA9C,EAAiD;;cAE1CR,gBAAgBtB,IAAhB,CAAH,EAA2B+B,KAA3B,CAAiC,GAAjC,EAAsChB,OAAtC,CAA8C,UAACK,KAAD,EAAQH,KAAR,EAAkB;qBACnDO,SAASA,OAAOJ,KAAP,CAAT,GAAyBK,SAASL,KAAT,CAAlC;gBACIf,WAAWa,MAAMC,OAAN,CAAcd,OAAd,CAAf,EAAuC;wBAC3BU,OAAR,CAAgB,UAACiB,MAAD,EAASf,KAAT,EAAmB;6BACtBe,OAAOR,MAAP,CAAT;iBADJ;;SAHR;YAQItB,YAAY,OAAOA,QAAP,KAAoB,UAApC,EAAgD;;2BAC7BA,SAASY,IAAT,CAAc,IAAd,EAAoBU,MAApB,EAA4BC,QAA5B,EAAsCzB,IAAtC,EAA4CF,WAA5C,CAAf;SADJ,MAEO;2BACYI,QAAf;;YAEA,OAAOqB,YAAP,KAAwB,WAA5B,EAAyC;mBAC9BC,UAAU1B,WAAjB;;eAEGyB,YAAP;KAlBJ,MAmBO,IAAIjB,eAAeQ,IAAf,CAAoBd,IAApB,MAA8B,gBAAlC,EAAoD;YACjDiC,UAAU,EAAhB;aACKlB,OAAL,CAAa,UAACmB,UAAD,EAAajB,KAAb,EAAuB;qBACvB,IAAT;gBACI,OAAOiB,UAAP,KAAsB,QAA1B,EAAoC;sBAC7BZ,gBAAgBY,UAAhB,CAAH,EAAiCH,KAAjC,CAAuC,GAAvC,EAA4ChB,OAA5C,CAAoD,UAACK,KAAD,EAAQH,KAAR,EAAkB;6BACzDO,SAASA,OAAOJ,KAAP,CAAT,GAAyBK,SAASL,KAAT,CAAlC;wBACIf,WAAWa,MAAMC,OAAN,CAAcd,OAAd,CAAf,EAAuC;gCAC3BU,OAAR,CAAgB,UAACiB,MAAD,EAASf,KAAT,EAAmB;qCACtBe,OAAOR,MAAP,CAAT;yBADJ;;iBAHR;wBAQQH,IAAR,CAAaG,MAAb;;SAXR;gBAcQH,IAAR,CAAaI,QAAb,EAAsBzB,IAAtB,EAA4BF,WAA5B;YACII,YAAY,OAAOA,QAAP,KAAoB,UAApC,EAAgD;2BAC7BA,SAASiC,KAAT,CAAe,IAAf,EAAqBF,OAArB,CAAf;SADJ,MAEO;2BACY/B,QAAf;;YAEA,OAAOqB,YAAP,KAAwB,WAA5B,EAAyC;mBAC9BU,WAAWnC,WAAlB;;eAEGyB,YAAP;;CAvFR;;;;;;;;"}